# Telros REST API

REST API для управления пользователями и их контактной информацией с использованием Java, Spring Boot и PostgreSQL.

## Технологии

- Java 21
- Spring Boot 3.2.3
- Spring Security с JWT аутентификацией
- Spring Data JPA
- PostgreSQL
- Swagger/OpenAPI для документации API
- JUnit для тестирования

## Функциональность

- Аутентификация и авторизация пользователей с использованием JWT
- CRUD операции для управления пользователями
- CRUD операции для управления детальной информацией о пользователях
- Загрузка и получение фотографий пользователей
- Документация API с использованием Swagger
- Интеграционные и модульные тесты

## Структура проекта

```
src/
├── main/
│   ├── java/
│   │   └── com/telros/telros/
│   │       ├── config/            # Конфигурационные классы
│   │       ├── controller/        # REST контроллеры
│   │       ├── exception/         # Обработчики исключений
│   │       ├── model/             # Модели данных
│   │       ├── dto/               # DTO объекты для запросов и ответов
│   │       │   ├── request/       # DTO для запросов
│   │       │   └── response/      # DTO для ответов
│   │       ├── repository/        # JPA репозитории
│   │       ├── security/          # Классы для безопасности
│   │       │   └── jwt/           # JWT утилиты
│   │       ├── service/           # Сервисы
│   │       └── TelrosApplication.java  # Главный класс приложения
│   └── resources/
│       ├── application.properties  # Настройки приложения
│       ├── static/                # Статические ресурсы
│       └── templates/             # Шаблоны
└── test/
    └── java/
        └── com/telros/telros/
            ├── controller/        # Тесты контроллеров
            ├── repository/        # Тесты репозиториев
            └── service/           # Тесты сервисов
```

## Модели данных

- **User**: Основная информация о пользователе (имя пользователя, email, пароль, роли)
- **Role**: Роли пользователей (ROLE_USER, ROLE_ADMIN)
- **UserDetails**: Детальная информация о пользователе (ФИО, дата рождения, телефон)
- **UserPhoto**: Фотография пользователя

## API Endpoints

### Аутентификация

- `POST /api/auth/signin` - Аутентификация пользователя
- `POST /api/auth/signup` - Регистрация нового пользователя

### Пользователи

- `GET /api/users` - Получить список всех пользователей (только для администраторов)
- `GET /api/users/{id}` - Получить детальную информацию о пользователе по ID
- `GET /api/users/me` - Получить детальную информацию о текущем пользователе
- `POST /api/users/me` - Создать или обновить детальную информацию о текущем пользователе
- `PUT /api/users/{id}` - Обновить детальную информацию о пользователе по ID (только для администраторов)
- `DELETE /api/users/{id}` - Удалить пользователя по ID (только для администраторов)

### Фотографии пользователей

- `GET /api/users/{id}/photo` - Получить фотографию пользователя по ID
- `POST /api/users/me/photo` - Загрузить фотографию для текущего пользователя
- `POST /api/users/{id}/photo` - Загрузить фотографию для пользователя по ID (только для администраторов)
- `DELETE /api/users/{id}/photo` - Удалить фотографию пользователя по ID (только для администраторов)
- `DELETE /api/users/me/photo` - Удалить фотографию текущего пользователя

## Запуск приложения

### Предварительные требования

- Java 21
- Maven
- PostgreSQL

## Документация API

После запуска приложения документация Swagger будет доступна по адресу:

http://localhost:8080/swagger-ui/index.html


## Учетные данные по умолчанию

При первом запуске приложения автоматически создается администратор с учетными данными:

- Имя пользователя: `admin`
- Пароль: `admin`